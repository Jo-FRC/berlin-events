<div class="jumbotron">

    <div id="addComment" >
        <p>{{username}} :</p><br>
        <p><a href="{{link.link}}" target="_blank"> {{link.title}}</a></p>
        <form name="form" role="form">
            <div id="commentsection" class="form-group" >
                <label for="comment">Comment</label>
                <input id="comment" class="form-control" ng-model="comment.text" type="text" name="comment" class="insert" required><br>
            </div>
            <button type="button"  ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-primary"  ng-click="addComment()" id="upload" class="load-pic btn btn-info" href="#/comment/{{link.id}}">Add</button>
        </form>
    </div>
    <br><br>

    <div id='comments' ng-repeat="comment in recentComments">
        <div class="row">
            <div class="comments-container">

                <ul id="comments-list" class="comments-list">
                    <li>
                        <div class="comment-main-level">
                            <div class="comment-box">
                                <div class="comment-head">
                                    <h6 class="comment-name by-author">{{comment.username}}</h6>
                                    <button type="button"  ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-primary btn-sm getReply" class="btn btn-outline-success" ng-click="reply(comment.id)">Reply</button>
                                    <i class="fa fa-reply"></i>
                                    <i class="fa fa-heart"></i>
                                </div>
                                <div class="comment-content">
                                    {{comment.comment_text}}
                                </div>
                            </div>
                        </div>
                        <form name="form" role="form">
                        <div ng-if="replysection == comment.id" id="replySection" class="form-group" >  
                        <label for="reply">Reply</label>
                        <input id="comment" class="form-control" ng-if="replysection == comment.id" ng-model="comment.replyText" type="text" name="comment" class="insert" required><br>
                        </div>
                        <button type="button"  ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-primary" ng-if="replysection == comment.id" class="btn btn-outline-success" ng-click="respond(comment)">Send</button>
                        </form>

                        <ul class="comments-list reply-list">
                            <li>
                                <div ng-repeat="reply in comment.replies"  class="comment-box">
                                    <div class="comment-head">
                                        <h6 class="comment-name">{{reply.username}}</h6>


                                        <!-- <button type="button"  ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-primary btn-sm getReply" class="btn btn-outline-success" ng-click="reply()">Write reply</button> -->


                                        <i class="fa fa-reply"></i>
                                        <i class="fa fa-heart"></i>
                                    </div>
                                    <div class="comment-content">
                                        {{reply.comment_text}}
                                    </div>
                                </div>

                                <!-- <form name="form" role="form">
                                <div ng-if="replysection" id="replySection" class="form-group" >
                                <label for="reply">Reply</label>
                                <input id="comment" class="form-control" ng-if="replysection" ng-model="comment.replyText" type="text" name="comment" class="insert" required><br>
                                </div>
                                <button type="button"  ng-disabled="form.$invalid || vm.dataLoading" class="btn btn-primary" ng-if="replysection" class="btn btn-outline-success" ng-click="respond(comment)">Reply</button>
                                </form> -->
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
